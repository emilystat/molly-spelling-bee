# Implementation Plan: Reset Progress & Difficult Words Features
**Date:** January 14, 2026

## Overview

Adding two integrated features to Molly Spelling Bee website:
1. **Reset Study Progress**: Allow restarting completed study groups
2. **Mark Difficult Words**: Flag challenging words and practice them separately

## Current Architecture Context

- **Tech Stack**: Pure vanilla JavaScript, no frameworks
- **Storage**: localStorage under `"mollySpellingBee_studyProgress"`
- **Key Files**:
  - `script.js` (884 lines) - Main logic
  - `index.html` (120 lines) - UI structure
  - `style.css` (480 lines) - Styling
  - `words-data.js` - 450 words across 3 difficulty levels

## Feature 1: Reset Study Progress

### What Gets Reset
- Completed groups array ‚Üí `[]`
- Current group pointer ‚Üí `0`
- Bookmark ‚Üí `null`
- Last studied date ‚Üí `null`
- **Preserves**: Difficult words (Feature 2 integration)

### UI Components

**Dashboard Controls:**
- Per-difficulty reset button (üîÑ Reset) next to each progress bar
- Optional global "Reset All" button in dashboard actions
- Confirmation modal to prevent accidents

**Confirmation Modal:**
- Clear messaging about what will be reset
- "Yes, Reset" and "Cancel" buttons
- Mentions that difficult words are preserved

### Implementation Points

**HTML Additions** (`index.html` around line 103):
- Add reset button to each `.progress-item`
- Add "Reset All" button to `.dashboard-actions`
- Add confirmation modal HTML

**CSS Additions** (`style.css` around line 455):
- `.reset-difficulty-btn` - Orange/red warning color
- `.reset-all-btn` - Red danger color
- `.modal` and `.modal-content` - Overlay and dialog styles

**JavaScript Additions** (`script.js` after line 254):
- `resetDifficultyProgress(difficulty)` - Reset one difficulty
- `resetAllProgress()` - Reset all three difficulties
- `showResetModal(difficulty)` - Display confirmation
- `hideResetModal()` - Close modal
- `confirmReset(difficulty)` - Execute reset after confirmation

**Event Listeners** (in DOMContentLoaded ~line 883):
- Reset buttons (delegated event handling)
- Modal confirm/cancel buttons

**Modified Functions**:
- `renderProgressDashboard()` - Add reset buttons to HTML output

---

## Feature 2: Mark Words as Difficult

### Core Functionality

**When Users Can Mark:**
- Manual: During study phase via "‚≠ê Mark Difficult" button
- Automatic: Incorrect test answers auto-marked
- Unmark: In management modal

**Storage Structure:**
```javascript
{
  oneBee: {
    // ... existing fields ...
    difficultWords: [
      {
        word: "necessary",
        definition: "Required, essential...",
        sentence: "Water is necessary...",
        difficulty: "oneBee",
        markedDate: "2025-12-31",
        reviewCount: 0,
        lastReviewDate: null
      }
    ]
  }
}
```

### UI Components

**Study Card Enhancement:**
- Add "‚≠ê Mark Difficult" button next to "Hear Word"
- Button shows "‚≠ê Marked as Difficult" (disabled) if already marked

**Dashboard Addition:**
- Difficult words summary section with count badge
- "üìö Review Difficult Words" button
- "‚öôÔ∏è Manage List" button

**Mode Selector:**
- Add new option: "Review Difficult Words"

**Management Modal:**
- Header with close button
- Filter dropdown (All / One Bee / Two Bee / Three Bee)
- List of difficult words with metadata (review count)
- "Remove" button per word
- "Clear All" button
- Empty state message

**Review Difficult Words Mode:**
- New study phase: `"reviewingDifficult"`
- Shows all marked difficult words (mixed difficulties)
- Standard study interface (no groups, just sequential)
- Optional test mode for difficult words
- No auto-advancement (stays in review mode)

### Implementation Points

**HTML Additions**:
1. Mark button in `#studyCard` (~line 59)
2. Difficult words summary in `#studyDashboard` (~line 103)
3. Mode selector option (~line 24)
4. Management modal (before closing `</main>`)

**CSS Additions**:
1. `.mark-difficult-btn` - Orange button, marked state styling
2. `.difficult-words-summary` - Orange bordered section
3. `.modal-large` - Wide modal for management
4. `.difficult-word-item` - List item styling
5. Empty state styling

**JavaScript Additions** (`script.js`):

*Core Functions (after line 254):*
- `initializeDifficultWords(difficulty)` - Ensure array exists
- `markWordAsDifficult(wordObj, difficulty)` - Add to list
- `unmarkWordAsDifficult(word, difficulty)` - Remove from list
- `isWordMarkedDifficult(wordObj, difficulty)` - Check status
- `getAllDifficultWords(filterDifficulty)` - Get all or filtered
- `getDifficultWordsCount()` - Total count across all difficulties
- `clearAllDifficultWords(filterDifficulty)` - Clear list
- `updateDifficultWordReview(word, difficulty)` - Track review stats

*Review Mode Functions (after line 510):*
- `startReviewDifficultWords()` - Enter review mode
- `startReviewDifficultTest()` - Test difficult words
- `completeReviewDifficultTest()` - Finish review test

*UI Functions (after line 658):*
- `updateDifficultWordsDisplay()` - Update count badge and button states
- `showDifficultWordsModal()` - Open management modal
- `hideDifficultWordsModal()` - Close modal
- `renderDifficultWordsList(filterDifficulty)` - Populate list
- `updateMarkDifficultButton()` - Update button state during study

**Modified Functions**:
- `loadStudyWord()` - Call `updateMarkDifficultButton()`
- `checkBtn` event listener - Auto-mark incorrect answers
- `renderProgressDashboard()` - Call `updateDifficultWordsDisplay()`
- `modeSelect` change handler - Handle "reviewDifficult" mode
- `startQuiz()` - Route to review mode if selected
- `completeStudyTest()` - Handle difficult review mode differently

**Event Listeners**:
- Mark difficult button
- Review difficult button
- Manage list button
- Close modal button
- Filter dropdown change
- Clear all button
- Unmark buttons (delegated)

---

## Implementation Phasing

### Phase 1: Reset Progress (Independent)
**Build first - no dependencies**
1. Add reset UI (buttons, modal)
2. Add reset styling
3. Implement reset functions
4. Wire up event listeners
5. Test thoroughly

**Estimated time**: 2-3 hours
**Files**: `index.html`, `style.css`, `script.js`

### Phase 2: Difficult Words (Builds on Phase 1)
**Build second - requires reset feature to preserve difficult words**
1. Add difficult words data model and core functions
2. Add mark button to study card
3. Add auto-marking on incorrect test answers
4. Add difficult words summary to dashboard
5. Add review difficult words mode
6. Add management modal
7. Test all workflows

**Estimated time**: 4-6 hours
**Files**: `index.html`, `style.css`, `script.js`

---

## Key Design Decisions (User Confirmed)

### Reset Feature
- ‚úÖ **Both per-difficulty AND global reset options** - Maximum flexibility for users
- ‚úÖ Confirmation modal prevents accidents
- ‚úÖ Preserves difficult words data
- ‚úÖ Visual feedback with success messages

### Difficult Words Feature
- ‚úÖ **Auto-mark incorrect test answers** - Convenient and intuitive, no need to remember
- ‚úÖ **Manual marking also available during study** - User has full control
- ‚úÖ **Mixed difficulty practice** - All difficult words reviewed together (no filtering by difficulty)
- ‚úÖ **Groups of 10** - Maintains consistency with existing study mode pattern
- ‚úÖ Management modal for cleanup
- ‚úÖ Visual indicators (‚≠ê) show marked status

### Review Workflow
When reviewing difficult words:
1. User clicks "Review Difficult Words" from dashboard
2. All marked difficult words loaded (mixed difficulties)
3. Words presented in groups of 10 for study
4. After studying 10 words, test on those 10
5. Advance to next group of 10
6. Incorrect answers remain in difficult words list
7. Can manually remove words via management modal

---

## Edge Cases Handled

**Reset Feature:**
- User at 100% completion
- User has active bookmark
- User in middle of study session
- Multiple tabs open (localStorage limitation)

**Difficult Words:**
- Duplicate marking attempts (prevented)
- Zero difficult words (friendly message, disabled button)
- Word marked then difficulty reset (preserved)
- Same word incorrect multiple times (no duplicates)
- Large list of difficult words (all supported)
- Remove word during active review session

---

## Testing Checklist

### Feature 1:
- [ ] Reset single difficulty from various completion states
- [ ] Reset all difficulties at once
- [ ] Confirmation modal works (confirm/cancel)
- [ ] Bookmark and dates cleared
- [ ] Difficult words preserved
- [ ] Dashboard updates correctly
- [ ] Success messages display

### Feature 2:
- [ ] Manual marking during study
- [ ] Auto-marking on incorrect answers
- [ ] Cannot duplicate marks
- [ ] Button state updates correctly
- [ ] Count badge accurate
- [ ] Review mode starts and navigates correctly
- [ ] Management modal shows/filters/removes words
- [ ] Clear all works
- [ ] Empty states display
- [ ] Persists across page refreshes
- [ ] Survives reset (Feature 1 integration)

---

## Files to Modify

1. **`/Users/Emily/claude-emily/Molly-spellingbee/script.js`**
   - Primary logic implementation
   - ~20-30 new functions
   - ~5-10 function modifications
   - ~200-300 lines of new code

2. **`/Users/Emily/claude-emily/Molly-spellingbee/index.html`**
   - Reset buttons and modal
   - Difficult words UI components
   - Management modal
   - Mode selector option
   - ~60-80 lines of new HTML

3. **`/Users/Emily/claude-emily/Molly-spellingbee/style.css`**
   - Reset button styles
   - Difficult words section styles
   - Modal styles
   - Button state styles
   - ~100-150 lines of new CSS

---

## Summary

This plan delivers two highly integrated features that enhance the study experience:

1. **Reset Progress** provides a way to restart after completion, with safeguards against accidental loss of data
2. **Difficult Words** creates a personalized practice system that adapts to the user's challenges

Both features:
- Follow existing architectural patterns (vanilla JS, localStorage)
- Maintain consistent UI/UX (yellow bee theme, similar controls)
- Handle edge cases gracefully
- Can be built incrementally
- Provide clear user feedback

The implementation preserves all existing functionality while adding substantial new value to the study mode experience.
